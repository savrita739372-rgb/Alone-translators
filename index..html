// --- Updated Voice Logic ---
function startMic() {
    // Check if browser allows mic
    if (!window.webkitSpeechRecognition && !window.SpeechRecognition) {
        alert("Aapka browser voice support nahi kar raha. Chrome use karein.");
        return;
    }

    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
    const recognition = new SpeechRecognition();
    
    // Auto language detection logic
    recognition.lang = document.getElementById('fromLang').value === 'auto' ? 'hi-IN' : document.getElementById('fromLang').value;

    recognition.onstart = () => {
        document.getElementById('transBtn').innerText = " LISTENING...";
    };

    recognition.onresult = (e) => {
        const transcript = e.results[0][0].transcript;
        document.getElementById('inputText').value = transcript;
        document.getElementById('transBtn').click(); // Auto translate after speaking
    };

    recognition.onerror = (event) => {
        console.error(event.error);
        alert("Mic Error: Permission 'Allow' karein ya chrome browser use karein.");
        document.getElementById('transBtn').innerText = "Execute Translation";
    };

    recognition.start();
}
